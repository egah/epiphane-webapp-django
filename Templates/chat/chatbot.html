<html>
  <!--This is my chatbot interface page. can you read the Templates/chat/chat.html and duplicate it styling for textarea, chat-box and buttonin chatbot.html. To do so you need static/css/style.css and static/js/script.js-->
  <head>

  <head>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <script src="{% static 'js/script.js' %}" defer></script>
  </head>

  <body>
    <button class="chatbot-toggler">
      <span class="material-symbols-rounded">mode_comment</span>
      <span class="material-symbols-outlined">close</span>
    </button>
    <div class="chatbot">
      <header>
        <h1>epiphane-ai</h1>
        <span class="close-btn material-symbols-outlined">close</span>
      </header>
      <ul class="chatbox" id="chat-log">
        <!-- Chat messages will be appended here -->
      </ul>
      <div class="chat-input">
        <textarea placeholder="Enter a message..." spellcheck="false" required id="chat-message-input"></textarea>
        <span id="send-btn" class="material-symbols-rounded">send</span>
      </div>
    </div>
  </body>
  <script>
    // Existing WebSocket and chat functionality script
  </script>
</html>
    <script>
    var wss_protocol = window.location.protocol == "https:" ? "wss://" : "ws://";
    var chatSocket = new WebSocket(
        wss_protocol + window.location.host + "/ws/chat/"
    );
    var messages = [];

    chatSocket.onmessage = function (e) {
        var data = JSON.parse(e.data);
        var message = data["text"];
        messages.push(message);

        var str = '<div class="space-y-2">';
        messages.forEach(function (msg) {
            str += `<p class="flex ${msg.source == "bot" ? "justify-start" : "justify-end"}">
                        <div class="chat-bubble ${msg.source == "bot" ? "left" : "right"}">${msg.msg}</div>
                    </p>`;
        });
        str += "</div>";
        document.querySelector(".chat-box").innerHTML = str;
    };

    chatSocket.onclose = function (e) {
        alert("Socket closed unexpectedly, please reload the page.");
    };

    document.querySelector("#chat-message-input").focus();
    document.querySelector("#chat-message-input").onkeyup = function (e) {
        if (e.keyCode === 13) {
            // enter, return
            document.querySelector("#chat-message-submit").click();
        }
    };

    document.querySelector("#chat-message-submit").onclick = function (e) {
        var messageInputDom = document.querySelector("#chat-message-input");
        var message = messageInputDom.value;
        chatSocket.send(
            JSON.stringify({
                text: message,
            })
        );

        messageInputDom.value = "";
    };
</script>
</html>